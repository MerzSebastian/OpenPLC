# OpenPLC Web Editor

A visual programming interface for OpenPLC built with React and React Flow. This project allows users to create logic circuits using a block-based interface and generates bytecode for PLC controllers.

https://merzsebastian.github.io/OpenPLC/

License: CC BY-NC 4.0

## Current Status

Thrown together weekend project. May continou updating it once in a while :)
Needs some cleanup and structuring. also its my first react project so best pracitces are not found here


### Current Features:
- Drag-and-drop block interface
- Support for digital I/O blocks (only tested with digital pins, analog pins may still be broken)
- Logic gates (AND, OR, NOT) with configurable inputs
- SR Latch block with configurable initial state
- Pulse block with pulse length and interval settings
- Project save/load functionality
- Bytecode generation for Arduino-compatible controllers

## Flash Functionality

The "Flash" button currently prints the generated bytecode to the browser console. Future implementation will include WebSerial integration for direct programming of devices via the browser.

## Opcode Reference

| Opcode | Name | Parameters | Description |
|--------|------|------------|-------------|
| 1 | SET_PIN_MODE_INPUT | pin (1 byte) | Set pin as input |
| 2 | SET_PIN_MODE_OUTPUT | pin (1 byte) | Set pin as output |
| 3 | READ_PIN | pin (1 byte), varIndex (1 byte) | Read digital pin to variable |
| 4 | WRITE_PIN | pin (1 byte), varIndex (1 byte) | Write variable to digital pin |
| 5 | READ_ANALOG_PIN | pin (1 byte), varIndex (1 byte) | Read analog pin to variable |
| 6 | WRITE_ANALOG_PIN | pin (1 byte), varIndex (1 byte) | Write variable to analog pin (PWM) |
| 10 | NOT | inputVar (1 byte), outputVar (1 byte) | Logical NOT operation |
| 11 | AND | numInputs (1 byte), inputs (n bytes), outputVar (1 byte) | Logical AND with variable inputs |
| 12 | OR | numInputs (1 byte), inputs (n bytes), outputVar (1 byte) | Logical OR with variable inputs |
| 13 | NAND | numInputs (1 byte), inputs (n bytes), outputVar (1 byte) | Logical NAND with variable inputs |
| 14 | NOR | numInputs (1 byte), inputs (n bytes), outputVar (1 byte) | Logical NOR with variable inputs |
| 15 | XOR | numInputs (1 byte), inputs (n bytes), outputVar (1 byte) | Logical XOR with variable inputs |
| 16 | LATCH | setVar (1 byte), resetVar (1 byte), outputVar (1 byte), initialState (1 byte) | SR Latch implementation |
| 17 | PULSE | outputVar (1 byte), pulseLength (2 bytes), interval (2 bytes) | Timer with configurable pulse and interval |
| 30 | DELAY | delayTime (1 byte) | Delay execution (delayTime Ã— 10ms) |

## Future Plans

- WebSerial integration for direct device programming
- Improved timer precision with extended range
- Support for different time units (ms, seconds, hours)
- Connection validation rules
- Analog input support with threshold conversion blocks
- Additional logic blocks and functionality

## Getting Started

### Prerequisites
- Node.js (v14 or higher)
- npm or yarn

### Installation 
1. go into frontend folder: `cd logic-editor`
2. Install dependencies: `npm install`
3. Start the development server: `npm start`
4. Open your browser to `http://localhost:3000`

### Building for Production
Run `npm run build` to create a production build.